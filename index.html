<!DOCTYPE>
<html>
<head>
	<title>Basketball Stats w/ Node.js & Socket.io</title>

	<style>
		.error {
			color: red;
			font-weight: bold;
		}
	</style>
</head>
<body>

	<div>
		<p class="error"></p>
		<p><b>Add a new game</b></p>
		<form id="register_game">
			<input size="35" id="game_name"></input>
			<input type="submit"></input>
		</form>
	</div>

	<br>

	<div>
		<h3>Games in Progress</h3>
		<div id="games_in_progress"></div>
	</div>

	<div>
		<h3>Completed Games</h3>
		<div id="games_finished"></div>
	</div>

	<script src="http://code.jquery.com/jquery-latest.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>

		jQuery(function($) {

			var socket = io.connect();
			var $gameName = $("#game_name");
			var $gameForm = $("#register_game");
			var $gamesInProgress = $("#games_in_progress");

			console.log(socket);

			$gameName.focus();

			$gameForm.submit(function(e) {
				e.preventDefault();

				socket.emit("new game", $gameName.val(), function() {
					console.log("Added game")
				});
				$gameName.val('');
			});

			socket.on("update games", function(games) {
				html = "";
				for (var i = 0; i < games.length; i++) {
					html += "<div>"+ games[i] +"</div>";
				}
				$gamesInProgress.html(html);
			});


		});
	</script>
</body>
</html>